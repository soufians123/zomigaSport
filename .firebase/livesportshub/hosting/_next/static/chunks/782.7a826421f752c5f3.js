"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{4782:(e,r,t)=>{t.r(r),t.d(r,{VideoPlayer:()=>J});var n=t(5155),o=t(2115),a=t(9588),l=t(285),s=t(5185),i=t(6101),d=t(6081),u=t(9178),c=t(2293),p=t(7900),f=t(1285),h=t(5152),v=t(4378),m=t(8905),g=t(3540),x=o.forwardRef((e,r)=>{let{children:t,...a}=e,l=o.Children.toArray(t),s=l.find(b);if(s){let e=s.props.children,t=l.map(r=>r!==s?r:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,n.jsx)(y,{...a,ref:r,children:o.isValidElement(e)?o.cloneElement(e,void 0,t):null})}return(0,n.jsx)(y,{...a,ref:r,children:t})});x.displayName="Slot";var y=o.forwardRef((e,r)=>{let{children:t,...n}=e;if(o.isValidElement(t)){let e=function(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(t),a=function(e,r){let t={...r};for(let n in r){let o=e[n],a=r[n];/^on[A-Z]/.test(n)?o&&a?t[n]=(...e)=>{a(...e),o(...e)}:o&&(t[n]=o):"style"===n?t[n]={...o,...a}:"className"===n&&(t[n]=[o,a].filter(Boolean).join(" "))}return{...e,...t}}(n,t.props);return t.type!==o.Fragment&&(a.ref=r?(0,i.t)(r,e):e),o.cloneElement(t,a)}return o.Children.count(t)>1?o.Children.only(null):null});y.displayName="SlotClone";var j=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function b(e){return o.isValidElement(e)&&e.type===j}var C=t(5845),w=t(8168),N=t(3795),P="Popover",[R,E]=(0,d.A)(P,[h.Bk]),A=(0,h.Bk)(),[k,O]=R(P),F=e=>{let{__scopePopover:r,children:t,open:a,defaultOpen:l,onOpenChange:s,modal:i=!1}=e,d=A(r),u=o.useRef(null),[c,p]=o.useState(!1),[v=!1,m]=(0,C.i)({prop:a,defaultProp:l,onChange:s});return(0,n.jsx)(h.bL,{...d,children:(0,n.jsx)(k,{scope:r,contentId:(0,f.B)(),triggerRef:u,open:v,onOpenChange:m,onOpenToggle:o.useCallback(()=>m(e=>!e),[m]),hasCustomAnchor:c,onCustomAnchorAdd:o.useCallback(()=>p(!0),[]),onCustomAnchorRemove:o.useCallback(()=>p(!1),[]),modal:i,children:t})})};F.displayName=P;var D="PopoverAnchor";o.forwardRef((e,r)=>{let{__scopePopover:t,...a}=e,l=O(D,t),s=A(t),{onCustomAnchorAdd:i,onCustomAnchorRemove:d}=l;return o.useEffect(()=>(i(),()=>d()),[i,d]),(0,n.jsx)(h.Mz,{...s,...a,ref:r})}).displayName=D;var _="PopoverTrigger",I=o.forwardRef((e,r)=>{let{__scopePopover:t,...o}=e,a=O(_,t),l=A(t),d=(0,i.s)(r,a.triggerRef),u=(0,n.jsx)(g.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Z(a.open),...o,ref:d,onClick:(0,s.m)(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?u:(0,n.jsx)(h.Mz,{asChild:!0,...l,children:u})});I.displayName=_;var S="PopoverPortal",[z,M]=R(S,{forceMount:void 0}),V=e=>{let{__scopePopover:r,forceMount:t,children:o,container:a}=e,l=O(S,r);return(0,n.jsx)(z,{scope:r,forceMount:t,children:(0,n.jsx)(m.C,{present:t||l.open,children:(0,n.jsx)(v.Z,{asChild:!0,container:a,children:o})})})};V.displayName=S;var L="PopoverContent",T=o.forwardRef((e,r)=>{let t=M(L,e.__scopePopover),{forceMount:o=t.forceMount,...a}=e,l=O(L,e.__scopePopover);return(0,n.jsx)(m.C,{present:o||l.open,children:l.modal?(0,n.jsx)(W,{...a,ref:r}):(0,n.jsx)(B,{...a,ref:r})})});T.displayName=L;var W=o.forwardRef((e,r)=>{let t=O(L,e.__scopePopover),a=o.useRef(null),l=(0,i.s)(r,a),d=o.useRef(!1);return o.useEffect(()=>{let e=a.current;if(e)return(0,w.Eq)(e)},[]),(0,n.jsx)(N.A,{as:x,allowPinchZoom:!0,children:(0,n.jsx)(U,{...e,ref:l,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.m)(e.onCloseAutoFocus,e=>{var r;e.preventDefault(),d.current||null==(r=t.triggerRef.current)||r.focus()}),onPointerDownOutside:(0,s.m)(e.onPointerDownOutside,e=>{let r=e.detail.originalEvent,t=0===r.button&&!0===r.ctrlKey;d.current=2===r.button||t},{checkForDefaultPrevented:!1}),onFocusOutside:(0,s.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),B=o.forwardRef((e,r)=>{let t=O(L,e.__scopePopover),a=o.useRef(!1),l=o.useRef(!1);return(0,n.jsx)(U,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var n,o;null==(n=e.onCloseAutoFocus)||n.call(e,r),r.defaultPrevented||(a.current||null==(o=t.triggerRef.current)||o.focus(),r.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:r=>{var n,o;null==(n=e.onInteractOutside)||n.call(e,r),r.defaultPrevented||(a.current=!0,"pointerdown"===r.detail.originalEvent.type&&(l.current=!0));let s=r.target;(null==(o=t.triggerRef.current)?void 0:o.contains(s))&&r.preventDefault(),"focusin"===r.detail.originalEvent.type&&l.current&&r.preventDefault()}})}),U=o.forwardRef((e,r)=>{let{__scopePopover:t,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:s,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:v,...m}=e,g=O(L,t),x=A(t);return(0,c.Oh)(),(0,n.jsx)(p.n,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:a,onUnmountAutoFocus:l,children:(0,n.jsx)(u.qW,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:v,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:f,onDismiss:()=>g.onOpenChange(!1),children:(0,n.jsx)(h.UC,{"data-state":Z(g.open),role:"dialog",id:g.contentId,...x,...m,ref:r,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),q="PopoverClose";function Z(e){return e?"open":"closed"}o.forwardRef((e,r)=>{let{__scopePopover:t,...o}=e,a=O(q,t);return(0,n.jsx)(g.sG.button,{type:"button",...o,ref:r,onClick:(0,s.m)(e.onClick,()=>a.onOpenChange(!1))})}).displayName=q,o.forwardRef((e,r)=>{let{__scopePopover:t,...o}=e,a=A(t);return(0,n.jsx)(h.i3,{...a,...o,ref:r})}).displayName="PopoverArrow";var $=t(9434);let G=o.forwardRef((e,r)=>{let{className:t,align:o="center",sideOffset:a=4,...l}=e;return(0,n.jsx)(V,{children:(0,n.jsx)(T,{ref:r,align:o,sideOffset:a,className:(0,$.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});G.displayName=T.displayName;var H=t(6618);let K=(0,t(9946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function J(e){var r;let{channel:t}=e,s=(0,o.useRef)(null),i=(0,o.useRef)(null),[d,u]=(0,o.useState)([]),[c,p]=(0,o.useState)(-1);(0,o.useEffect)(()=>{if(i.current&&i.current.destroy(),t&&s.current){let e=s.current,r=new a.Ay;i.current=r,r.on(a.Ay.Events.MANIFEST_PARSED,(t,n)=>{u(n.levels.map((e,r)=>({...e,originalIndex:r})).filter(e=>e.height).sort((e,r)=>r.height-e.height)),p(r.autoLevelEnabled?-1:r.currentLevel),e.play().catch(()=>{})}),r.on(a.Ay.Events.LEVEL_SWITCHED,(e,r)=>{p(r.level)}),r.loadSource(t.streamUrl),r.attachMedia(e)}else s.current&&t&&s.current.canPlayType("application/vnd.apple.mpegurl")&&(s.current.src=t.streamUrl);return()=>{i.current&&(i.current.destroy(),i.current=null)}},[t]);let f=e=>{i.current&&(i.current.currentLevel=e,p(e))},h=d.length>0;return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:(0,$.cn)("w-full overflow-hidden shadow-lg bg-black aspect-video",h?"rounded-t-lg":"rounded-lg"),children:t?(0,n.jsx)("video",{ref:s,className:"w-full h-full",controls:!0,autoPlay:!0,muted:!0,playsInline:!0}):(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center text-center text-muted-foreground p-8",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(H.A,{className:"mx-auto h-16 w-16 mb-4"}),(0,n.jsx)("h3",{className:"font-headline text-xl font-semibold",children:"حدد قناة لبدء المشاهدة"}),(0,n.jsx)("p",{children:"اختر قناة من القائمة لبدء البث المباشر."})]})})}),t&&h&&(0,n.jsx)("div",{className:"flex justify-end items-center p-2 bg-card rounded-b-lg border-x border-b border-border",children:(0,n.jsxs)(F,{children:[(0,n.jsx)(I,{asChild:!0,children:(0,n.jsxs)(l.$,{variant:"ghost",size:"sm",children:[(0,n.jsx)(K,{className:"h-4 w-4 ml-2"}),(0,n.jsx)("span",{children:"الجودة"})]})}),(0,n.jsx)(G,{align:"end",className:"w-auto p-2 bg-background/80 border-border text-foreground backdrop-blur-md",children:(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(l.$,{variant:"ghost",className:(0,$.cn)("justify-start px-2 py-1 h-auto text-sm hover:bg-secondary",-1===c&&"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground"),onClick:()=>f(-1),children:"تلقائي"}),d.map(e=>(0,n.jsxs)(l.$,{variant:"ghost",className:(0,$.cn)("justify-start px-2 py-1 h-auto text-sm hover:bg-secondary",c===e.originalIndex&&"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground"),onClick:()=>f(e.originalIndex),children:[e.height,"p"]},e.originalIndex))]})})]})})]},null!=(r=null==t?void 0:t.id)?r:"no-channel")}}}]);